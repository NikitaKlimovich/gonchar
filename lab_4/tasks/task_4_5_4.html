<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Task 4.5.4</title>
  </head>
  <style type="text/css">
    #clock{
      text-align: left;
      margin-left: 10%;
      margin-top: 10%;
      font-size: 10vh;
    }
  </style>

  <body>
    <div id="clock"></div>
  </body>
</html>

<script>
  function currentTime() {
    var date = new Date();
    var hour = date.getHours();
    var min = date.getMinutes();
    var sec = date.getSeconds();
    var milli = date.getMilliseconds();
    var micro = String(window.performance.now()).split('.')[1];
    console.log(micro)
    try {
      if (micro.length == 1){
        micro+="00"
      }
  
      if (micro.length == 2){
        micro+="0"
      }
  
      micro = parseInt(micro.slice(0,3));
      
    } catch (error) {
      micro = parseInt(Math.random()*100);
    }

    hour = toTwoDigits(hour);
    min = toTwoDigits(min);
    sec = toTwoDigits(sec);
    milli = toThreeDigits(milli)
    micro = toThreeDigits(micro)

    document.getElementById("clock").innerText =
      hour + " : " + min + " : " + sec + " : " + milli + " : " + micro;

    var t = setTimeout(function () {
      currentTime();
    });
  }

  function toTwoDigits(k) {
    if (k > 99) {
      return k;
    }
    if (k < 10) {
      return "0" + k;
    }
    return k;
  }

  function toThreeDigits(k) {
    if (k < 10) {
      return "00" + k;
    }

    if (k < 100){
      return "0" + k;
    }
    return k;
  }

  currentTime();
</script>
